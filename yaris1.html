<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>üéØ Zƒ±t Anlamlƒ± Kelimeler Yarƒ±≈üƒ±</title>
  <style>
    body{box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100%;color:#fff}
    html{height:100%}
    .container{max-width:1200px;margin:0 auto;background:rgba(255,255,255,.1);border-radius:20px;padding:30px;backdrop-filter:blur(10px);box-shadow:0 8px 32px rgba(0,0,0,.3)}
    .header{text-align:center;margin-bottom:20px}
    .title{margin:0 0 10px;font-size:2.5rem;font-weight:bold;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
    .round-info{margin:0 0 14px;font-size:1.2rem;padding:10px 20px;background:rgba(255,255,255,.2);border-radius:10px;display:inline-block}
    .setup-section{background:rgba(255,255,255,.15);border-radius:15px;padding:25px;margin-bottom:20px}
    .time-selector{margin-bottom:20px}
    .time-buttons{display:flex;gap:15px;flex-wrap:wrap;justify-content:center}
    .time-btn{padding:12px 24px;border:none;border-radius:25px;background:rgba(255,255,255,.2);color:#fff;font-size:1rem;font-weight:bold;cursor:pointer;transition:all .3s ease;border:2px solid transparent}
    .time-btn:hover{background:rgba(255,255,255,.3);transform:translateY(-2px)}
    .time-btn.selected{background:#4CAF50;border-color:#45a049;box-shadow:0 4px 15px rgba(76,175,80,.4)}
    .start-btn{background:linear-gradient(45deg,#FF6B6B,#4ECDC4);color:#fff;border:none;padding:15px 40px;font-size:1.2rem;font-weight:bold;border-radius:30px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.2)}
    .start-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.3)}
    .start-btn:disabled{background:#666;cursor:not-allowed;transform:none}
    .game-area{display:none}
    .timer-section{text-align:center;margin-bottom:20px}
    .timer{font-size:3rem;font-weight:bold;color:#FFD700;text-shadow:2px 2px 4px rgba(0,0,0,.5);margin-bottom:15px}
    .progress-container{background:rgba(255,255,255,.2);border-radius:25px;height:20px;margin:0 auto 20px;max-width:800px;overflow:hidden;display:flex}
    .progress-segment{height:100%;transition:all .5s ease;border-radius:0}
    .progress-segment:first-child{border-radius:25px 0 0 25px}
    .progress-segment:last-child{border-radius:0 25px 25px 0}
    .progress-segment.single{border-radius:25px}
    .control-bar{text-align:center;margin-bottom:15px}
    .contestants-area{display:grid;gap:30px;margin-bottom:30px}
    .contestants-area.three-columns{grid-template-columns:repeat(3,1fr)}
    .contestants-area.two-columns{grid-template-columns:repeat(2,1fr)}
    .contestants-area.one-column{grid-template-columns:1fr;max-width:600px;margin:0 auto 30px}
    .contestant{background:rgba(255,255,255,.15);border-radius:15px;padding:25px;text-align:center;border:3px solid transparent;transition:all .3s ease}
    .contestant.player1{border-color:#FF8C00}.contestant.player2{border-color:#1E90FF}.contestant.player3{border-color:#32CD32}
    .contestant-name{font-size:1.3rem;font-weight:bold;margin-bottom:15px;color:#FFD700}
    .score{font-size:2rem;font-weight:bold;margin-bottom:20px}
    .question-area{background:rgba(255,255,255,.1);border-radius:10px;padding:20px;margin-bottom:20px}
    .question{font-size:1.5rem;font-weight:bold;margin-bottom:15px;color:#FF4444}
    .options{display:flex;flex-direction:column;gap:10px}
    .option-btn{padding:12px 20px;border:none;border-radius:8px;background:rgba(255,255,255,.9);color:#333;font-size:1rem;cursor:pointer;transition:all .3s ease;border:2px solid transparent}
    .option-btn:hover{background:#fff;transform:translateY(-1px)}
    .option-btn.correct{background:#4CAF50;border-color:#45a049}
    .option-btn.wrong{background:#f44336;border-color:#da190b}
    .winners-section{text-align:center;margin-top:30px}
    .winners-title{font-size:2rem;font-weight:bold;margin-bottom:20px;color:#FFD700}
    .winners-list{display:flex;justify-content:center;flex-wrap:wrap;gap:20px;margin-bottom:30px}
    .winner-card{background:linear-gradient(45deg,#FFD700,#FFA500);color:#333;padding:15px 25px;border-radius:15px;font-weight:bold;font-size:1.1rem;box-shadow:0 4px 15px rgba(255,215,0,.3)}
    .next-round-btn,.next-group-btn{background:linear-gradient(45deg,#4CAF50,#45a049);color:#fff;border:none;padding:15px 40px;font-size:1.2rem;font-weight:bold;border-radius:30px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(76,175,80,.3)}
    .next-round-btn:hover,.next-group-btn:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(76,175,80,.4)}
    .group-result{text-align:center;margin-top:30px;padding:30px;background:rgba(255,255,255,.15);border-radius:15px}
    .group-winner-title{font-size:1.8rem;font-weight:bold;margin-bottom:15px;color:#FFD700}
    .group-winner-name{font-size:2rem;font-weight:bold;margin-bottom:20px;padding:15px 30px;background:linear-gradient(45deg,#FFD700,#FFA500);color:#333;border-radius:15px;display:inline-block;box-shadow:0 4px 15px rgba(255,215,0,.3)}
    .final-winner{text-align:center;padding:40px;background:linear-gradient(45deg,#FFD700,#FFA500);border-radius:20px;color:#333;margin-top:30px}
    .final-winner h2{font-size:3rem;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
    .final-winner .winner-name{font-size:2.5rem;font-weight:bold;margin-bottom:20px}
    .celebration{font-size:4rem;margin-bottom:20px}
    @media (max-width:768px){
      .contestants-area.three-columns,.contestants-area.two-columns{grid-template-columns:1fr}
      .title{font-size:2rem}
    }
  

    /* --- Yeni: Mod se√ßimi, isim giri≈üi, rekorlar --- */
    .mode-buttons{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin:10px 0 20px}
    .mode-btn{padding:12px 18px;border:none;border-radius:12px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;background:rgba(255,255,255,.15);color:#fff;border:2px solid rgba(255,255,255,.25)}
    .mode-btn.active{background:linear-gradient(45deg,#FFD700,#FFA500);color:#333;border-color:rgba(0,0,0,.1)}
    .fields{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;max-width:900px;margin:0 auto 20px}
    .fields.single{grid-template-columns:1fr;max-width:700px}
    .field{background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.18);border-radius:14px;padding:14px}
    .field label{display:block;font-weight:700;margin-bottom:8px;color:#FFD700}
    .field input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.18);color:#fff;font-size:1.05rem;outline:none}
    .field input::placeholder{color:rgba(255,255,255,.55)}
    .home-actions{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:10px}
    .secondary-btn{background:linear-gradient(45deg,#6C63FF,#4ECDC4);color:#fff;padding:15px 30px;border:none;border-radius:50px;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.2);font-weight:700}
    .secondary-btn:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(0,0,0,.25)}
    .small-note{opacity:.9;text-align:center;margin-top:12px;font-size:1rem}
    .error-box{max-width:900px;margin:18px auto 0;background:rgba(255,0,0,.12);border:1px solid rgba(255,0,0,.35);color:#FFD1D1;padding:12px 14px;border-radius:12px;display:none}
    .top-bar{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .pill{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22);border-radius:999px;padding:8px 14px;font-weight:700}
    .records-wrap{max-width:1000px;margin:0 auto}
    .records-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:18px}
    .records-card{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);border-radius:16px;padding:16px}
    .records-card h3{margin:0 0 10px;color:#FFD700}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.14);text-align:left}
    th{color:#FFD700}
    .muted{opacity:.8}
    .winner-tag{display:inline-block;margin-left:10px;padding:4px 10px;border-radius:999px;background:rgba(255,215,0,.25);border:1px solid rgba(255,215,0,.55);color:#FFD700;font-weight:800}
    .single-mode .contestants-area.one-column{max-width:900px}
    .single-mode .contestant{padding:32px}
    .single-mode .question{font-size:2.1rem}
    .single-mode .option-btn{padding:16px 22px;font-size:1.1rem}
    @media (max-width:900px){
      .fields{grid-template-columns:1fr}
      .records-grid{grid-template-columns:1fr}
    }
@media (max-width:768px){
      .container{padding:16px}
      .title{font-size:2rem}
      .setup-section{padding:16px}
      .timer-section{margin-bottom:12px}
      .timer{font-size:2.2rem;margin-bottom:10px}
      .progress-container{height:14px;margin-bottom:12px}
      .contestants-area{gap:14px}
      .contestants-area.three-columns{grid-template-columns:1fr}
      /* Dikey telefonda 2 ki≈üi tek s√ºtuna d√º≈üebilir */
      .contestants-area.two-columns{grid-template-columns:1fr}
      .contestants-area.one-column{max-width:100%;margin:0 0 20px}
      .contestant{padding:14px}
      .contestant-name{font-size:1.1rem;margin-bottom:10px}
      .score{font-size:1.6rem;margin-bottom:12px}
      .question-area{padding:12px;margin-bottom:12px}
      .question{font-size:1.2rem;margin-bottom:10px}
      .option-btn{padding:10px 12px;font-size:1rem}
    }

    /* Yatay telefonda 2 ki≈üi mutlaka yan yana kalsƒ±n */
    @media (max-width:900px) and (orientation: landscape){
      .container{padding:14px}
      .timer-section{margin-bottom:10px}
      .timer{font-size:2.0rem;margin-bottom:8px}
      .progress-container{height:12px;margin-bottom:10px}
      .contestants-area{gap:12px}
      .contestants-area.two-columns{grid-template-columns:repeat(2,minmax(0,1fr))}
      .contestant{padding:12px}
      .contestant-name{font-size:1.05rem;margin-bottom:8px}
      .score{font-size:1.35rem;margin-bottom:10px}
      .question-area{padding:10px;margin-bottom:10px}
      .question{font-size:1.05rem;margin-bottom:8px}
      .option-btn{padding:8px 10px;font-size:.95rem}
    }

    /* Ekran y√ºksekliƒüi √ßok d√º≈ü√ºkse (yatay telefon gibi) biraz daha sƒ±kƒ±≈ütƒ±r */
    @media (max-height:500px){
      .title{font-size:1.8rem}
      .round-info{font-size:1rem;padding:8px 12px}
      .timer{font-size:1.9rem}
      .progress-container{height:12px;margin-bottom:10px}
      .contestants-area{gap:10px}
      .contestant{padding:11px}
      .score{font-size:1.25rem;margin-bottom:8px}
      .question-area{padding:9px;margin-bottom:9px}
      .question{font-size:1.0rem;margin-bottom:7px}
      .option-btn{padding:7px 9px;font-size:.92rem}
    }

    /* Ana sayfaya d√∂n√º≈ü baƒülantƒ±sƒ± */
    .round-info.navbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      width:100%;
      max-width:1100px;
    }
    .home-link{
      text-decoration:none;
      color:#fff;
      font-weight:800;
      font-size:1rem;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.35);
      background:rgba(0,0,0,.10);
      white-space:nowrap;
      -webkit-tap-highlight-color: transparent;
    }
    .home-link:hover{ background:rgba(0,0,0,.18); }
    .home-link:active{ transform: translateY(1px); }
    .screen-label{ font-weight:800; }
    @media (max-width:768px){
      .home-link{font-size:.95rem;padding:6px 9px}
    }
    
</style>
</head>


<body>
  <main class="container" id="app">
    <header class="header">
      <h1 class="title">üéØ Zƒ±t Anlamlƒ± Kelimeler Yarƒ±≈üƒ±</h1>
      <div class="round-info navbar" aria-label="√úst men√º">
        <a class="home-link" href="./index.html" title="Ana sayfaya d√∂n">üè† Ana Sayfa</a>
        <span class="screen-label" id="statusInfo">Ana Men√º</span>
      </div>
    </header>

    <!-- Ana Men√º -->
    <section class="setup-section" id="homeSection">
      <div style="text-align:center;margin-bottom:18px;">
        <h3 style="color:#FFD700;margin-bottom:10px;">Modu se√ß, isim alanƒ±nƒ± doldur ve ba≈üla!</h3>
        <div class="small-note">‚è±Ô∏è S√ºre: <b>60 saniye</b> &nbsp;|&nbsp; ‚úÖ Doƒüru: <b>+10</b> &nbsp;|&nbsp; ‚ùå Yanlƒ±≈ü: <b>-5</b> ve <b>-3 sn</b></div>
      </div>

      <div class="mode-buttons">
        <button class="mode-btn active" id="modeSingleBtn">üë§ Tek Ki≈üi</button>
        <button class="mode-btn" id="modeDuelBtn">üë• ƒ∞ki Ki≈üi</button>
      </div>

      <div class="fields single" id="nameFields">
        <div class="field">
          <label for="name1">Oyuncu 1</label>
          <input id="name1" maxlength="20" placeholder="√ñrn: Efe" autocomplete="off" />
        </div>
        <div class="field" id="name2Field" style="display:none;">
          <label for="name2">Oyuncu 2</label>
          <input id="name2" maxlength="20" placeholder="√ñrn: Zeynep" autocomplete="off" />
        </div>
      </div>

      <div class="home-actions">
        <button class="start-btn" id="startGameBtn">üöÄ Yarƒ±≈üƒ± Ba≈ülat</button>
        <button class="secondary-btn" id="openRecordsBtn">üèÖ Rekorlar</button>
      </div>

      <div class="error-box" id="homeError"></div>
    </section>

    <!-- Oyun -->
    <section class="game-area" id="gameSection" style="display:none;">
      <div class="top-bar" style="margin-bottom:14px;">
        <div class="pill" id="modePill">Mod: Tek Ki≈üi</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;">
          <button class="secondary-btn" id="toHomeBtn" style="padding:12px 18px;font-size:1rem;">üè† Ana Men√º</button>
          <button class="secondary-btn" id="toRecordsBtn" style="padding:12px 18px;font-size:1rem;">üèÖ Rekorlar</button>
        </div>
      </div>

      <div class="timer-section">
        <div class="timer" id="timer">60</div>
        <div class="progress-container" id="progressContainer" style="display:none;"></div>
      </div>

      <div class="contestants-area one-column" id="contestantsArea"></div>
    </section>

    <!-- Sonu√ß -->
    <div class="final-winner" id="resultSection" style="display:none;">
      <div class="celebration" id="resultEmoji">üèÅ‚ú®üèÅ</div>
      <h2 id="resultTitle">S√ºre Bitti!</h2>
      <div class="winner-name" id="resultMain"></div>
      <div id="resultDetail" style="font-size:1.2rem;margin-bottom:22px;"></div>

      <div class="home-actions">
        <button class="start-btn" id="playAgainBtn">üîÅ Tekrar Oyna</button>
        <button class="secondary-btn" id="resultHomeBtn">üè† Ana Men√º</button>
        <button class="secondary-btn" id="resultRecordsBtn">üèÖ Rekorlar</button>
      </div>
    </div>

    <!-- Rekorlar -->
    <section class="setup-section" id="recordsSection" style="display:none;">
      <div class="top-bar" style="margin-bottom:18px;">
        <h2 style="margin:0;color:#FFD700;">üèÖ Rekorlar</h2>
        <div style="display:flex;gap:10px;flex-wrap:wrap;">
          <button class="secondary-btn" id="recordsHomeBtn" style="padding:12px 18px;font-size:1rem;">üè† Ana Men√º</button>
          <button class="secondary-btn" id="resetRecordsBtn" style="padding:12px 18px;font-size:1rem;">üßπ Rekorlarƒ± Sƒ±fƒ±rla</button>
        </div>
      </div>

      <div class="records-wrap">
        <div class="records-grid">
          <div class="records-card">
            <h3>üë§ Tek Ki≈üi Rekorlarƒ±</h3>
            <div class="muted" style="margin-bottom:10px;">ƒ∞sim bazlƒ± en y√ºksek puanlar</div>
            <div id="singleRecords"></div>
          </div>
          <div class="records-card">
            <h3>üë• D√ºello Rekorlarƒ±</h3>
            <div class="muted" style="margin-bottom:10px;">D√ºellolarda isim bazlƒ± en y√ºksek puanlar</div>
            <div id="duelRecords"></div>
          </div>
        </div>

        <div class="records-card" style="margin-top:18px;">
          <h3>üßæ Son D√ºellolar</h3>
          <div class="muted" style="margin-bottom:10px;">Bu cihazda oynanan son d√ºellolar</div>
          <div id="duelHistory"></div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const wordPairs = [
      {word: "Acƒ±", correct: "Tatlƒ±", options: ["Tatlƒ±", "Ek≈üi", "Tuzlu"]},
      {word: "A√ß", correct: "Tok", options: ["Tok", "Susuz", "Yorgun"]},
      {word: "A√ßmak", correct: "Kapatmak", options: ["Kapatmak", "Kƒ±rmak", "Bozulmak"]},
      {word: "Afacan", correct: "Uslu", options: ["Uslu", "Yaramaz", "Hƒ±zlƒ±"]},
      {word: "Aƒüƒ±r", correct: "Hafif", options: ["Hafif", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "Aƒülamak", correct: "G√ºlmek", options: ["G√ºlmek", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "Ak", correct: "Kara", options: ["Kara", "Mavi", "Ye≈üil"]},
      {word: "Ak≈üam", correct: "Sabah", options: ["Sabah", "√ñƒüle", "Gece"]},
      {word: "Aktif", correct: "Pasif", options: ["Pasif", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "Al√ßakg√∂n√ºll√º", correct: "Kibirli", options: ["Kibirli", "Nazik", "G√ºzel"]},
      {word: "Alƒ±cƒ±", correct: "Satƒ±cƒ±", options: ["Satƒ±cƒ±", "M√º≈üteri", "Kom≈üu"]},
      {word: "Alt", correct: "√úst", options: ["√úst", "Yan", "Orta"]},
      {word: "Aptal", correct: "Akƒ±llƒ±", options: ["Akƒ±llƒ±", "G√ºzel", "√áirkin"]},
      {word: "Artƒ±", correct: "Eksi", options: ["Eksi", "√áarpƒ±", "B√∂l√º"]},
      {word: "Ast", correct: "√úst", options: ["√úst", "E≈ü", "Yan"]},
      {word: "A≈üaƒüƒ±", correct: "Yukarƒ±", options: ["Yukarƒ±", "Saƒüa", "Sola"]},
      {word: "Aydƒ±nlƒ±k", correct: "Karanlƒ±k", options: ["Karanlƒ±k", "Gri", "Renkli"]},
      {word: "Aynƒ±", correct: "Farklƒ±", options: ["Farklƒ±", "Benzer", "E≈ü"]},
      {word: "Az", correct: "√áok", options: ["√áok", "Orta", "Biraz"]},
      {word: "Azalmak", correct: "√áoƒüalmak", options: ["√áoƒüalmak", "Artmak", "B√ºy√ºmek"]},
      {word: "Barƒ±≈ü", correct: "Sava≈ü", options: ["Sava≈ü", "Oyun", "Dans"]},
      {word: "Barƒ±≈ümak", correct: "Darƒ±lmak", options: ["Darƒ±lmak", "Kavga etmek", "Kƒ±zmak"]},
      {word: "Ba≈ülamak", correct: "Bitirmek", options: ["Bitirmek", "Devam etmek", "Durmak"]},
      {word: "Bayat", correct: "Taze", options: ["Taze", "Eski", "Yeni"]},
      {word: "Birinci", correct: "Sonuncu", options: ["Sonuncu", "ƒ∞kinci", "√ú√ß√ºnc√º"]},
      {word: "Bo≈ü", correct: "Dolu", options: ["Dolu", "Yarƒ±m", "B√ºy√ºk"]},
      {word: "B√∂lme", correct: "√áarpma", options: ["√áarpma", "Toplama", "√áƒ±karma"]},
      {word: "Bulmak", correct: "Kaybetmek", options: ["Kaybetmek", "Aramak", "G√∂rmek"]},
      {word: "Cesaret", correct: "Korkaklƒ±k", options: ["Korkaklƒ±k", "G√º√ß", "Zayƒ±flƒ±k"]},
      {word: "Cesur", correct: "Korkak", options: ["Korkak", "G√º√ßl√º", "Zayƒ±f"]},
      {word: "Ceza", correct: "√ñd√ºl", options: ["√ñd√ºl", "Hediye", "Para"]},
      {word: "Cƒ±lƒ±z", correct: "G√ºrb√ºz", options: ["G√ºrb√ºz", "Zayƒ±f", "ƒ∞nce"]},
      {word: "Cimri", correct: "C√∂mert", options: ["C√∂mert", "Zengin", "Fakir"]},
      {word: "√áalƒ±≈ükan", correct: "Tembel", options: ["Tembel", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "√áekmek", correct: "ƒ∞tmek", options: ["ƒ∞tmek", "Almak", "Vermek"]},
      {word: "√áƒ±kmak", correct: "ƒ∞nmek", options: ["ƒ∞nmek", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "√áƒ±karma", correct: "Toplama", options: ["Toplama", "√áarpma", "B√∂lme"]},
      {word: "Binmek", correct: "ƒ∞nmek", options: ["ƒ∞nmek", "√áƒ±kmak", "Girmek"]},
      {word: "Girmek", correct: "√áƒ±kmak", options: ["√áƒ±kmak", "Binmek", "ƒ∞nmek"]},
      {word: "√áukur", correct: "T√ºmsek", options: ["T√ºmsek", "D√ºz", "Y√ºksek"]},
      {word: "Dahil", correct: "Hari√ß", options: ["Hari√ß", "ƒ∞√ßinde", "Dƒ±≈üƒ±nda"]},
      {word: "Dar", correct: "Geni≈ü", options: ["Geni≈ü", "Uzun", "Kƒ±sa"]},
      {word: "Derin", correct: "Sƒ±ƒü", options: ["Sƒ±ƒü", "Uzun", "Kƒ±sa"]},
      {word: "Dert", correct: "Derman", options: ["Derman", "ƒ∞la√ß", "√áare"]},
      {word: "Diri", correct: "√ñl√º", options: ["√ñl√º", "Hasta", "Ya≈ülƒ±"]},
      {word: "Doƒüal", correct: "Yapay", options: ["Yapay", "Sahte", "Taklit"]},
      {word: "Doƒüru", correct: "Yanlƒ±≈ü", options: ["Yanlƒ±≈ü", "G√ºzel", "√áirkin"]},
      {word: "Dost", correct: "D√º≈üman", options: ["D√º≈üman", "Arkada≈ü", "Kom≈üu"]},
      {word: "D√ºz", correct: "Eƒüri", options: ["Eƒüri", "Yuvarlak", "Kare"]},
      {word: "D√ºzenli", correct: "Daƒüƒ±nƒ±k", options: ["Daƒüƒ±nƒ±k", "Karƒ±≈üƒ±k", "Bozuk"]},
      {word: "Eksik", correct: "Fazla", options: ["Fazla", "Tam", "√áok"]},
      {word: "Erken", correct: "Ge√ß", options: ["Ge√ß", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "Esaret", correct: "√ñzg√ºrl√ºk", options: ["√ñzg√ºrl√ºk", "H√ºrriyet", "Baƒüƒ±msƒ±zlƒ±k"]},
      {word: "Evet", correct: "Hayƒ±r", options: ["Hayƒ±r", "Belki", "Tabii"]},
      {word: "Galip", correct: "Maƒülup", options: ["Maƒülup", "Kaybeden", "Yenilen"]},
      {word: "Ge√ßmi≈ü", correct: "Gelecek", options: ["Gelecek", "≈ûimdi", "Bug√ºn"]},
      {word: "Gelir", correct: "Gider", options: ["Gider", "Masraf", "Harcama"]},
      {word: "Gelmek", correct: "Gitmek", options: ["Gitmek", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "Gen√ß", correct: "ƒ∞htiyar", options: ["ƒ∞htiyar", "Ya≈ülƒ±", "Orta"]},
      {word: "Ger√ßek", correct: "Hayal", options: ["Hayal", "R√ºya", "D√º≈ü"]},
      {word: "Giri≈ü", correct: "√áƒ±kƒ±≈ü", options: ["√áƒ±kƒ±≈ü", "Kapƒ±", "Yol"]},
      {word: "G√∂steri≈üli", correct: "Sade", options: ["Sade", "Basit", "D√ºz"]},
      {word: "G√ºney", correct: "Kuzey", options: ["Kuzey", "Doƒüu", "Batƒ±"]},
      {word: "G√ºzel", correct: "√áirkin", options: ["√áirkin", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "Hayƒ±r", correct: "≈ûer", options: ["≈ûer", "K√∂t√ºl√ºk", "Fenalƒ±k"]},
      {word: "Hƒ±zlƒ±", correct: "Yava≈ü", options: ["Yava≈ü", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "Islak", correct: "Kuru", options: ["Kuru", "Soƒüuk", "Sƒ±cak"]},
      {word: "Ya≈ü", correct: "Kuru", options: ["Kuru", "Soƒüuk", "Sƒ±cak"]},
      {word: "ƒ∞√ß", correct: "Dƒ±≈ü", options: ["Dƒ±≈ü", "Yan", "√úst"]},
      {word: "ƒ∞hracat", correct: "ƒ∞thalat", options: ["ƒ∞thalat", "Satƒ±≈ü", "Alƒ±≈ü"]},
      {word: "ƒ∞lk", correct: "Son", options: ["Son", "Orta", "ƒ∞kinci"]},
      {word: "ƒ∞lkel", correct: "Medeni", options: ["Medeni", "Modern", "Geli≈ümi≈ü"]},
      {word: "ƒ∞ndirim", correct: "Zam", options: ["Zam", "Artƒ±≈ü", "Y√ºkselme"]},
      {word: "ƒ∞ni≈ü", correct: "Yoku≈ü", options: ["Yoku≈ü", "√áƒ±kƒ±≈ü", "Y√ºkselme"]},
      {word: "ƒ∞yi", correct: "K√∂t√º", options: ["K√∂t√º", "Orta", "G√ºzel"]},
      {word: "Kabul", correct: "Ret", options: ["Ret", "Reddetme", "Hayƒ±r"]},
      {word: "K√¢r", correct: "Zarar", options: ["Zarar", "Kayƒ±p", "Ziyan"]},
      {word: "Katƒ±", correct: "Sƒ±vƒ±", options: ["Sƒ±vƒ±", "Gaz", "Buhar"]},
      {word: "Kolay", correct: "Zor", options: ["Zor", "Orta", "Basit"]},
      {word: "Masum", correct: "Su√ßlu", options: ["Su√ßlu", "Kabahatli", "G√ºnahkar"]},
      {word: "Nazik", correct: "Kaba", options: ["Kaba", "G√ºzel", "√áirkin"]},
      {word: "Ne≈üe", correct: "Keder", options: ["Keder", "√úz√ºnt√º", "Acƒ±"]},
      {word: "Ne≈üeli", correct: "√úzg√ºn", options: ["√úzg√ºn", "Mutlu", "Kƒ±zgƒ±n"]},
      {word: "√ñnce", correct: "Sonra", options: ["Sonra", "≈ûimdi", "Hemen"]},
      {word: "√ñvmek", correct: "Yermek", options: ["Yermek", "Ele≈ütirmek", "Kƒ±namak"]},
      {word: "√ñz", correct: "√úvey", options: ["√úvey", "Yabancƒ±", "Ba≈üka"]},
      {word: "√ñzel", correct: "Resm√Æ", options: ["Resm√Æ", "Devlet", "Kamu"]},
      {word: "√ñzg√ºr", correct: "Tutsak", options: ["Tutsak", "Esir", "Mahkum"]},
      {word: "Perakende", correct: "Toptan", options: ["Toptan", "B√ºy√ºk", "√áok"]},
      {word: "Saf", correct: "Kurnaz", options: ["Kurnaz", "Akƒ±llƒ±", "Zeki"]},
      {word: "Saƒü", correct: "Sol", options: ["Sol", "√úst", "Alt"]},
      {word: "Saƒülam", correct: "√á√ºr√ºk", options: ["√á√ºr√ºk", "Bozuk", "Kƒ±rƒ±k"]},
      {word: "Sayƒ±sal", correct: "S√∂zel", options: ["S√∂zel", "Yazƒ±lƒ±", "S√∂zl√º"]},
      {word: "Sert", correct: "Yumu≈üak", options: ["Yumu≈üak", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "Sevin√ß", correct: "√úz√ºnt√º", options: ["√úz√ºnt√º", "Keder", "Acƒ±"]},
      {word: "Sevinmek", correct: "√úz√ºlmek", options: ["√úz√ºlmek", "Aƒülamak", "Kederlenme"]},
      {word: "Seyrek", correct: "Sƒ±k", options: ["Sƒ±k", "√áok", "Fazla"]},
      {word: "Sƒ±cak", correct: "Soƒüuk", options: ["Soƒüuk", "Islak", "Kuru"]},
      {word: "Somut", correct: "Soyut", options: ["Soyut", "Hayali", "D√º≈ü√ºnsel"]},
      {word: "Sorun", correct: "√á√∂z√ºm", options: ["√á√∂z√ºm", "Cevap", "Hal"]},
      {word: "Tatlƒ±", correct: "Acƒ±", options: ["Acƒ±", "Ek≈üi", "Tuzlu"]},
      {word: "Tok", correct: "A√ß", options: ["A√ß", "Susuz", "Yorgun"]},
      {word: "Kapatmak", correct: "A√ßmak", options: ["A√ßmak", "Kƒ±rmak", "Bozulmak"]},
      {word: "Uslu", correct: "Afacan", options: ["Afacan", "Yaramaz", "Hƒ±zlƒ±"]},
      {word: "Hafif", correct: "Aƒüƒ±r", options: ["Aƒüƒ±r", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "G√ºlmek", correct: "Aƒülamak", options: ["Aƒülamak", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "Kara", correct: "Ak", options: ["Ak", "Mavi", "Ye≈üil"]},
      {word: "Sabah", correct: "Ak≈üam", options: ["Ak≈üam", "√ñƒüle", "Gece"]},
      {word: "Pasif", correct: "Aktif", options: ["Aktif", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "Kibirli", correct: "Al√ßakg√∂n√ºll√º", options: ["Al√ßakg√∂n√ºll√º", "Nazik", "G√ºzel"]},
      {word: "Satƒ±cƒ±", correct: "Alƒ±cƒ±", options: ["Alƒ±cƒ±", "M√º≈üteri", "Kom≈üu"]},
      {word: "√úst", correct: "Alt", options: ["Alt", "Yan", "Orta"]},
      {word: "Akƒ±llƒ±", correct: "Aptal", options: ["Aptal", "G√ºzel", "√áirkin"]},
      {word: "Eksi", correct: "Artƒ±", options: ["Artƒ±", "√áarpƒ±", "B√∂l√º"]},
      {word: "Yukarƒ±", correct: "A≈üaƒüƒ±", options: ["A≈üaƒüƒ±", "Saƒüa", "Sola"]},
      {word: "Karanlƒ±k", correct: "Aydƒ±nlƒ±k", options: ["Aydƒ±nlƒ±k", "Gri", "Renkli"]},
      {word: "Farklƒ±", correct: "Aynƒ±", options: ["Aynƒ±", "Benzer", "E≈ü"]},
      {word: "√áok", correct: "Az", options: ["Az", "Orta", "Biraz"]},
      {word: "√áoƒüalmak", correct: "Azalmak", options: ["Azalmak", "Artmak", "B√ºy√ºmek"]},
      {word: "Sava≈ü", correct: "Barƒ±≈ü", options: ["Barƒ±≈ü", "Oyun", "Dans"]},
      {word: "Darƒ±lmak", correct: "Barƒ±≈ümak", options: ["Barƒ±≈ümak", "Kavga etmek", "Kƒ±zmak"]},
      {word: "Bitirmek", correct: "Ba≈ülamak", options: ["Ba≈ülamak", "Devam etmek", "Durmak"]},
      {word: "Taze", correct: "Bayat", options: ["Bayat", "Eski", "Yeni"]},
      {word: "Sonuncu", correct: "Birinci", options: ["Birinci", "ƒ∞kinci", "√ú√ß√ºnc√º"]},
      {word: "Dolu", correct: "Bo≈ü", options: ["Bo≈ü", "Yarƒ±m", "B√ºy√ºk"]},
      {word: "√áarpma", correct: "B√∂lme", options: ["B√∂lme", "Toplama", "√áƒ±karma"]},
      {word: "Kaybetmek", correct: "Bulmak", options: ["Bulmak", "Aramak", "G√∂rmek"]},
      {word: "Korkaklƒ±k", correct: "Cesaret", options: ["Cesaret", "G√º√ß", "Zayƒ±flƒ±k"]},
      {word: "Korkak", correct: "Cesur", options: ["Cesur", "G√º√ßl√º", "Zayƒ±f"]},
      {word: "√ñd√ºl", correct: "Ceza", options: ["Ceza", "Hediye", "Para"]},
      {word: "G√ºrb√ºz", correct: "Cƒ±lƒ±z", options: ["Cƒ±lƒ±z", "Zayƒ±f", "ƒ∞nce"]},
      {word: "C√∂mert", correct: "Cimri", options: ["Cimri", "Zengin", "Fakir"]},
      {word: "Tembel", correct: "√áalƒ±≈ükan", options: ["√áalƒ±≈ükan", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "ƒ∞tmek", correct: "√áekmek", options: ["√áekmek", "Almak", "Vermek"]},
      {word: "ƒ∞nmek", correct: "√áƒ±kmak", options: ["√áƒ±kmak", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "Toplama", correct: "√áƒ±karma", options: ["√áƒ±karma", "√áarpma", "B√∂lme"]},
      {word: "√áƒ±kmak", correct: "Girmek", options: ["Girmek", "Binmek", "ƒ∞nmek"]},
      {word: "T√ºmsek", correct: "√áukur", options: ["√áukur", "D√ºz", "Y√ºksek"]},
      {word: "Hari√ß", correct: "Dahil", options: ["Dahil", "ƒ∞√ßinde", "Dƒ±≈üƒ±nda"]},
      {word: "Geni≈ü", correct: "Dar", options: ["Dar", "Uzun", "Kƒ±sa"]},
      {word: "Sƒ±ƒü", correct: "Derin", options: ["Derin", "Uzun", "Kƒ±sa"]},
      {word: "Derman", correct: "Dert", options: ["Dert", "ƒ∞la√ß", "√áare"]},
      {word: "√ñl√º", correct: "Diri", options: ["Diri", "Hasta", "Ya≈ülƒ±"]},
      {word: "Yapay", correct: "Doƒüal", options: ["Doƒüal", "Sahte", "Taklit"]},
      {word: "Yanlƒ±≈ü", correct: "Doƒüru", options: ["Doƒüru", "G√ºzel", "√áirkin"]},
      {word: "D√º≈üman", correct: "Dost", options: ["Dost", "Arkada≈ü", "Kom≈üu"]},
      {word: "Eƒüri", correct: "D√ºz", options: ["D√ºz", "Yuvarlak", "Kare"]},
      {word: "Daƒüƒ±nƒ±k", correct: "D√ºzenli", options: ["D√ºzenli", "Karƒ±≈üƒ±k", "Bozuk"]},
      {word: "Fazla", correct: "Eksik", options: ["Eksik", "Tam", "√áok"]},
      {word: "Ge√ß", correct: "Erken", options: ["Erken", "Hƒ±zlƒ±", "Yava≈ü"]},
      {word: "√ñzg√ºrl√ºk", correct: "Esaret", options: ["Esaret", "H√ºrriyet", "Baƒüƒ±msƒ±zlƒ±k"]},
      {word: "Hayƒ±r", correct: "Evet", options: ["Evet", "Belki", "Tabii"]},
      {word: "Maƒülup", correct: "Galip", options: ["Galip", "Kaybeden", "Yenilen"]},
      {word: "Gelecek", correct: "Ge√ßmi≈ü", options: ["Ge√ßmi≈ü", "≈ûimdi", "Bug√ºn"]},
      {word: "Gider", correct: "Gelir", options: ["Gelir", "Masraf", "Harcama"]},
      {word: "Gitmek", correct: "Gelmek", options: ["Gelmek", "Ko≈ümak", "Y√ºr√ºmek"]},
      {word: "ƒ∞htiyar", correct: "Gen√ß", options: ["Gen√ß", "Ya≈ülƒ±", "Orta"]},
      {word: "Ya≈ülƒ±", correct: "Gen√ß", options: ["Gen√ß", "ƒ∞htiyar", "Orta"]},
      {word: "Hayal", correct: "Ger√ßek", options: ["Ger√ßek", "R√ºya", "D√º≈ü"]},
      {word: "√áƒ±kƒ±≈ü", correct: "Giri≈ü", options: ["Giri≈ü", "Kapƒ±", "Yol"]},
      {word: "Sade", correct: "G√∂steri≈üli", options: ["G√∂steri≈üli", "Basit", "D√ºz"]},
      {word: "Kuzey", correct: "G√ºney", options: ["G√ºney", "Doƒüu", "Batƒ±"]},
      {word: "√áirkin", correct: "G√ºzel", options: ["G√ºzel", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "≈ûer", correct: "Hayƒ±r", options: ["Hayƒ±r", "K√∂t√ºl√ºk", "Fenalƒ±k"]},
      {word: "Yava≈ü", correct: "Hƒ±zlƒ±", options: ["Hƒ±zlƒ±", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "Kuru", correct: "Islak", options: ["Islak", "Soƒüuk", "Sƒ±cak"]},
      {word: "Dƒ±≈ü", correct: "ƒ∞√ß", options: ["ƒ∞√ß", "Yan", "√úst"]},
      {word: "ƒ∞thalat", correct: "ƒ∞hracat", options: ["ƒ∞hracat", "Satƒ±≈ü", "Alƒ±≈ü"]},
      {word: "Son", correct: "ƒ∞lk", options: ["ƒ∞lk", "Orta", "ƒ∞kinci"]},
      {word: "Medeni", correct: "ƒ∞lkel", options: ["ƒ∞lkel", "Modern", "Geli≈ümi≈ü"]},
      {word: "Zam", correct: "ƒ∞ndirim", options: ["ƒ∞ndirim", "Artƒ±≈ü", "Y√ºkselme"]},
      {word: "Yoku≈ü", correct: "ƒ∞ni≈ü", options: ["ƒ∞ni≈ü", "√áƒ±kƒ±≈ü", "Y√ºkselme"]},
      {word: "K√∂t√º", correct: "ƒ∞yi", options: ["ƒ∞yi", "Orta", "G√ºzel"]},
      {word: "Ret", correct: "Kabul", options: ["Kabul", "Reddetme", "Hayƒ±r"]},
      {word: "Zarar", correct: "K√¢r", options: ["K√¢r", "Kayƒ±p", "Ziyan"]},
      {word: "Sƒ±vƒ±", correct: "Katƒ±", options: ["Katƒ±", "Gaz", "Buhar"]},
      {word: "Zor", correct: "Kolay", options: ["Kolay", "Orta", "Uzun"]},
      {word: "Su√ßlu", correct: "Masum", options: ["Masum", "Kabahatli", "G√ºnahkar"]},
      {word: "Kaba", correct: "Nazik", options: ["Nazik", "G√ºzel", "√áirkin"]},
      {word: "Keder", correct: "Ne≈üe", options: ["Ne≈üe", "√úz√ºnt√º", "Acƒ±"]},
      {word: "√úzg√ºn", correct: "Ne≈üeli", options: ["Ne≈üeli", "√áƒ±kƒ±≈ü", "Kƒ±zgƒ±n"]},
      {word: "Sonra", correct: "√ñnce", options: ["√ñnce", "≈ûimdi", "Hemen"]},
      {word: "Yermek", correct: "√ñvmek", options: ["√ñvmek", "Ele≈ütirmek", "Kƒ±namak"]},
      {word: "√úvey", correct: "√ñz", options: ["√ñz", "Yabancƒ±", "Ba≈üka"]},
      {word: "Resm√Æ", correct: "√ñzel", options: ["√ñzel", "Devlet", "Kamu"]},
      {word: "Tutsak", correct: "√ñzg√ºr", options: ["√ñzg√ºr", "Esir", "Mahkum"]},
      {word: "Toptan", correct: "Perakende", options: ["Perakende", "B√ºy√ºk", "√áok"]},
      {word: "Kurnaz", correct: "Saf", options: ["Saf", "Akƒ±llƒ±", "Zeki"]},
      {word: "Sol", correct: "Saƒü", options: ["Saƒü", "√úst", "Alt"]},
      {word: "√á√ºr√ºk", correct: "Saƒülam", options: ["Saƒülam", "Bozuk", "Kƒ±rƒ±k"]},
      {word: "S√∂zel", correct: "Sayƒ±sal", options: ["Sayƒ±sal", "Yazƒ±lƒ±", "S√∂zl√º"]},
      {word: "Yumu≈üak", correct: "Sert", options: ["Sert", "B√ºy√ºk", "K√º√ß√ºk"]},
      {word: "√úz√ºnt√º", correct: "Sevin√ß", options: ["Sevin√ß", "Keder", "Acƒ±"]},
      {word: "√úz√ºlmek", correct: "Sevinmek", options: ["Sevinmek", "Aƒülamak", "Kederlenme"]},
      {word: "Sƒ±k", correct: "Seyrek", options: ["Seyrek", "√áok", "Fazla"]},
      {word: "Soƒüuk", correct: "Sƒ±cak", options: ["Sƒ±cak", "Islak", "Kuru"]},
      {word: "Soyut", correct: "Somut", options: ["Somut", "Hayali", "D√º≈ü√ºnsel"]},
      {word: "√á√∂z√ºm", correct: "Sorun", options: ["Sorun", "Cevap", "Hal"]}
    ];

    // --- Ayarlar ---
    const GAME_SECONDS = 60;
    const POINTS_CORRECT = 10;
    const POINTS_WRONG = 5;
    const PENALTY_SECONDS = 3;

    // --- Ses efektleri ---
    function playCorrectSound(){try{const a=new (window.AudioContext||window.webkitAudioContext)();const o=a.createOscillator();const g=a.createGain();o.connect(g);g.connect(a.destination);o.type='sine';o.frequency.setValueAtTime(523.25,a.currentTime);g.gain.setValueAtTime(0.15,a.currentTime);g.gain.exponentialRampToValueAtTime(0.001,a.currentTime+0.25);o.start(a.currentTime);o.stop(a.currentTime+0.26);}catch(e){}}
    function playIncorrectSound(){try{const a=new (window.AudioContext||window.webkitAudioContext)();const o=a.createOscillator();const g=a.createGain();o.connect(g);g.connect(a.destination);o.type='square';o.frequency.setValueAtTime(196,a.currentTime);g.gain.setValueAtTime(0.12,a.currentTime);g.gain.exponentialRampToValueAtTime(0.001,a.currentTime+0.25);o.start(a.currentTime);o.stop(a.currentTime+0.26);}catch(e){}}

    // --- Yardƒ±mcƒ±lar ---
    function shuffleArray(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
    function buildIndexDeck(){
      const idxs = Array.from({length: wordPairs.length}, (_,i)=>i);
      return shuffleArray(idxs);
    }
    function nextDeckIndex(pi){
      if(wordPairs.length<=1) return 0;
      if(!decks[pi] || decks[pi].length===0){
        decks[pi] = buildIndexDeck();
      }
      let idx = decks[pi].pop();
      // Aynƒ± kelimenin √ºst √ºste gelmesini m√ºmk√ºn olduƒüunca engelle
      if(idx === lastIdx[pi]){
        if(decks[pi].length===0) decks[pi] = buildIndexDeck();
        const idx2 = decks[pi].pop();
        decks[pi].push(idx);
        idx = idx2;
      }
      return idx;
    }
    function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
    function normalizeName(s){ return (s||'').trim().replace(/\s+/g,' '); }

    // --- LocalStorage ---
    const KEY_SINGLE = "zk_best_single_v1";
    const KEY_DUEL = "zk_best_duel_v1";
    const KEY_HISTORY = "zk_duel_history_v1";

    function loadMap(key){ try{ return JSON.parse(localStorage.getItem(key) || "{}") || {}; }catch(e){ return {}; } }
    function saveMap(key,obj){ localStorage.setItem(key, JSON.stringify(obj)); }
    function loadHistory(){ try{ return JSON.parse(localStorage.getItem(KEY_HISTORY) || "[]") || []; }catch(e){ return []; } }
    function saveHistory(arr){ localStorage.setItem(KEY_HISTORY, JSON.stringify(arr.slice(0,50))); }

    // --- Durum ---
    let mode = "single";      // "single" | "duel"
    let players = [];         // string[]
    let scores = [];          // number[]
    let currentQ = [];        // {word,correct,options}[]
    let lastIdx = [];         // last question index per player
    let decks = [];          // shuffled index deck per player
    let timeLeft = GAME_SECONDS;
    let timerId = null;
    let gameActive = false;

    // --- Ekranlar ---
    const appEl = document.getElementById("app");
    const statusInfo = document.getElementById("statusInfo");
    const homeSection = document.getElementById("homeSection");
    const gameSection = document.getElementById("gameSection");
    const resultSection = document.getElementById("resultSection");
    const recordsSection = document.getElementById("recordsSection");

    function showScreen(which){
      homeSection.style.display = (which==="home") ? "block" : "none";
      gameSection.style.display = (which==="game") ? "block" : "none";
      resultSection.style.display = (which==="result") ? "block" : "none";
      recordsSection.style.display = (which==="records") ? "block" : "none";

      if(which==="home") statusInfo.textContent = "Ana Men√º";
      if(which==="game") statusInfo.textContent = "Oyun";
      if(which==="result") statusInfo.textContent = "Sonu√ß";
      if(which==="records") statusInfo.textContent = "Rekorlar";
    }

    // --- Mod UI ---
    const modeSingleBtn = document.getElementById("modeSingleBtn");
    const modeDuelBtn = document.getElementById("modeDuelBtn");
    const nameFields = document.getElementById("nameFields");
    const name2Field = document.getElementById("name2Field");
    const modePill = document.getElementById("modePill");
    const homeError = document.getElementById("homeError");

    function setMode(newMode){
      mode = newMode;
      if(mode==="single"){
        modeSingleBtn.classList.add("active");
        modeDuelBtn.classList.remove("active");
        name2Field.style.display = "none";
        nameFields.classList.add("single");
      } else {
        modeDuelBtn.classList.add("active");
        modeSingleBtn.classList.remove("active");
        name2Field.style.display = "block";
        nameFields.classList.remove("single");
      }
      homeError.style.display="none";
    }

    modeSingleBtn.addEventListener("click", ()=>setMode("single"));
    modeDuelBtn.addEventListener("click", ()=>setMode("duel"));

    // --- Oyun Kurulumu ---
    const contestantsArea = document.getElementById("contestantsArea");
    const timerEl = document.getElementById("timer");

    function renderPlayers(){
      contestantsArea.innerHTML = "";
      const cols = (players.length===1) ? "one-column" : "two-columns";
      contestantsArea.className = "contestants-area " + cols;
      appEl.classList.toggle("single-mode", players.length===1);
      modePill.textContent = (players.length===1) ? "Mod: Tek Ki≈üi" : "Mod: ƒ∞ki Ki≈üi";

      players.forEach((name, i)=>{
        const card = document.createElement("div");
        card.className = "contestant player" + (i+1);
        card.innerHTML = `
          <div class="contestant-name">${escapeHtml(name)}</div>
          <div class="score"><span id="score-${i}">0</span></div>
          <div class="question-area">
            <div class="question" id="question-${i}">Hazƒ±r mƒ±sƒ±n?</div>
            <div class="options" id="options-${i}"></div>
          </div>
        `;
        contestantsArea.appendChild(card);
      });
    }

    function updateTimer(){ timerEl.textContent = timeLeft; }

    function startTimer(){
      timeLeft = GAME_SECONDS;
      updateTimer();
      clearInterval(timerId);
      timerId = setInterval(()=>{
        if(!gameActive) return;
        timeLeft--;
        if(timeLeft < 0) timeLeft = 0;
        updateTimer();
        if(timeLeft<=0) endGame();
      }, 1000);
    }

    function generateQuestion(pi){
      const idx = nextDeckIndex(pi);
      lastIdx[pi] = idx;
      const q = wordPairs[idx];
      currentQ[pi] = q;

      const qEl = document.getElementById(`question-${pi}`);
      const optEl = document.getElementById(`options-${pi}`);
      if(!qEl || !optEl) return;

      qEl.textContent = q.word;
      optEl.innerHTML = "";

      const opts = shuffleArray([...(q.options || [])]);
      opts.forEach(opt=>{
        const b = document.createElement("button");
        b.className = "option-btn";
        b.textContent = opt;
        b.addEventListener("click", ()=>selectAnswer(pi, opt));
        optEl.appendChild(b);
      });
    }

    function lockOptions(pi, selected){
      const optEl = document.getElementById(`options-${pi}`);
      const btns = optEl.querySelectorAll(".option-btn");
      btns.forEach(btn=>{
        btn.style.pointerEvents = "none";
        const q = currentQ[pi];
        if(btn.textContent === q.correct) btn.classList.add("correct");
        else if(btn.textContent === selected) btn.classList.add("wrong");
      });
    }

    function updateScore(pi){
      const sEl = document.getElementById(`score-${pi}`);
      if(sEl) sEl.textContent = scores[pi];
    }

    function selectAnswer(pi, selected){
      if(!gameActive) return;
      const q = currentQ[pi];
      if(!q) return;

      lockOptions(pi, selected);

      if(selected === q.correct){
        playCorrectSound();
        scores[pi] += POINTS_CORRECT;
        updateScore(pi);
      } else {
        playIncorrectSound();
        scores[pi] = Math.max(0, scores[pi] - POINTS_WRONG);
        updateScore(pi);

        // s√ºre cezasƒ±
        timeLeft = Math.max(0, timeLeft - PENALTY_SECONDS);
        updateTimer();
        if(timeLeft<=0){ endGame(); return; }
      }

      setTimeout(()=>{ if(gameActive) generateQuestion(pi); }, 550);
    }

    // --- Ba≈ülat / Bitir ---
    const startGameBtn = document.getElementById("startGameBtn");
    const name1Input = document.getElementById("name1");
    const name2Input = document.getElementById("name2");

    function startGameFromHome(){
      const n1 = normalizeName(name1Input.value);
      const n2 = normalizeName(name2Input.value);

      if(!n1){
        homeError.textContent = "L√ºtfen Oyuncu 1 i√ßin bir isim yaz.";
        homeError.style.display = "block";
        return;
      }
      if(mode==="duel" && !n2){
        homeError.textContent = "L√ºtfen Oyuncu 2 i√ßin bir isim yaz.";
        homeError.style.display = "block";
        return;
      }
      if(mode==="duel" && n1.toLowerCase() === n2.toLowerCase()){
        homeError.textContent = "ƒ∞ki oyuncunun ismi aynƒ± olmasƒ±n üôÇ";
        homeError.style.display = "block";
        return;
      }

      homeError.style.display="none";

      players = (mode==="single") ? [n1] : [n1, n2];
      scores = players.map(()=>0);
      currentQ = players.map(()=>null);
      lastIdx = players.map(()=>-1);
      decks = players.map(()=>shuffleArray(Array.from({length: wordPairs.length}, (_,i)=>i)));

      renderPlayers();
      showScreen("game");

      gameActive = true;
      startTimer();
      players.forEach((_,i)=>generateQuestion(i));
    }

    startGameBtn.addEventListener("click", startGameFromHome);

    function endGame(){
      if(!gameActive) return;
      gameActive = false;
      clearInterval(timerId);

      saveRecords();
      showResultsUI();
      showScreen("result");
    }

    // --- Kayƒ±tlar ---
    function saveRecords(){
      const singleMap = loadMap(KEY_SINGLE);
      const duelMap = loadMap(KEY_DUEL);

      if(players.length===1){
        const name = players[0];
        const sc = scores[0];
        singleMap[name] = Math.max(singleMap[name] || 0, sc);
        saveMap(KEY_SINGLE, singleMap);
      } else {
        players.forEach((name, i)=>{
          const sc = scores[i];
          duelMap[name] = Math.max(duelMap[name] || 0, sc);
        });
        saveMap(KEY_DUEL, duelMap);

        const hist = loadHistory();
        hist.unshift({
          date: new Date().toISOString(),
          p1: players[0], s1: scores[0],
          p2: players[1], s2: scores[1]
        });
        saveHistory(hist);
      }
    }

    function mapToSortedRows(mapObj){
      const entries = Object.entries(mapObj || {})
        .map(([name, sc])=>({name, sc}))
        .sort((a,b)=>b.sc - a.sc)
        .slice(0, 20);

      if(entries.length===0) return `<div class="muted">Hen√ºz kayƒ±t yok.</div>`;

      const rows = entries.map((e, idx)=>`<tr><td>${idx+1}</td><td>${escapeHtml(e.name)}</td><td><b>${e.sc}</b></td></tr>`).join("");
      return `
        <table>
          <thead><tr><th>#</th><th>ƒ∞sim</th><th>Puan</th></tr></thead>
          <tbody>${rows}</tbody>
        </table>
      `;
    }

    function historyToHtml(hist){
      const items = (hist || []).slice(0, 10);
      if(items.length===0) return `<div class="muted">Hen√ºz d√ºello kaydƒ± yok.</div>`;

      const rows = items.map(h=>{
        const d = new Date(h.date);
        const when = d.toLocaleString("tr-TR", { dateStyle:"short", timeStyle:"short" });
        const winner = (h.s1===h.s2) ? "Berabere" : (h.s1>h.s2 ? h.p1 : h.p2);
        const winnerTag = (winner==="Berabere") ? "" : `<span class="winner-tag">Kazanan: ${escapeHtml(winner)}</span>`;
        return `
          <tr>
            <td>${when}</td>
            <td>${escapeHtml(h.p1)} <b>${h.s1}</b> - <b>${h.s2}</b> ${escapeHtml(h.p2)} ${winnerTag}</td>
          </tr>
        `;
      }).join("");

      return `
        <table>
          <thead><tr><th>Zaman</th><th>D√ºello</th></tr></thead>
          <tbody>${rows}</tbody>
        </table>
      `;
    }

    function renderRecords(){
      document.getElementById("singleRecords").innerHTML = mapToSortedRows(loadMap(KEY_SINGLE));
      document.getElementById("duelRecords").innerHTML = mapToSortedRows(loadMap(KEY_DUEL));
      document.getElementById("duelHistory").innerHTML = historyToHtml(loadHistory());
    }

    // --- Sonu√ß UI ---
    const resultEmoji = document.getElementById("resultEmoji");
    const resultTitle = document.getElementById("resultTitle");
    const resultMain = document.getElementById("resultMain");
    const resultDetail = document.getElementById("resultDetail");

    function showResultsUI(){
      if(players.length===1){
        resultEmoji.textContent = "üèÅ‚ú®üèÅ";
        resultTitle.textContent = "S√ºre Bitti!";
        resultMain.textContent = `${players[0]}: ${scores[0]} Puan`;
        resultDetail.innerHTML = `<div class="muted">Tekrar oynamak ister misin?</div>`;
      } else {
        const [p1,p2] = players;
        const [s1,s2] = scores;
        resultEmoji.textContent = "üèÜ‚öîÔ∏èüèÜ";
        resultTitle.textContent = "D√ºello Bitti!";
        let winnerText = "Berabere!";
        if(s1>s2) winnerText = `${p1} kazandƒ±!`;
        if(s2>s1) winnerText = `${p2} kazandƒ±!`;

        resultMain.textContent = winnerText;

        const tag1 = (s1>s2) ? `<span class="winner-tag">Kazanan</span>` : "";
        const tag2 = (s2>s1) ? `<span class="winner-tag">Kazanan</span>` : "";
        resultDetail.innerHTML = `
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:14px;max-width:900px;margin:0 auto;">
            <div class="records-card" style="text-align:center;">
              <div style="font-weight:900;color:#FFD700;font-size:1.4rem;">${escapeHtml(p1)} ${tag1}</div>
              <div style="font-size:2.2rem;font-weight:900;margin-top:6px;">${s1}</div>
            </div>
            <div class="records-card" style="text-align:center;">
              <div style="font-weight:900;color:#FFD700;font-size:1.4rem;">${escapeHtml(p2)} ${tag2}</div>
              <div style="font-size:2.2rem;font-weight:900;margin-top:6px;">${s2}</div>
            </div>
          </div>
        `;
      }
    }

    // --- Navigasyon Butonlarƒ± ---
    document.getElementById("toHomeBtn").addEventListener("click", ()=>{ stopGameIfRunning(); showScreen("home"); });
    document.getElementById("toRecordsBtn").addEventListener("click", ()=>{ stopGameIfRunning(); renderRecords(); showScreen("records"); });

    document.getElementById("openRecordsBtn").addEventListener("click", ()=>{ renderRecords(); showScreen("records"); });
    document.getElementById("recordsHomeBtn").addEventListener("click", ()=>{ showScreen("home"); });

    document.getElementById("resultHomeBtn").addEventListener("click", ()=>{ showScreen("home"); });
    document.getElementById("resultRecordsBtn").addEventListener("click", ()=>{ renderRecords(); showScreen("records"); });

    document.getElementById("playAgainBtn").addEventListener("click", ()=>{
      const n1 = players[0] || "";
      const n2 = players[1] || "";
      name1Input.value = n1;
      name2Input.value = n2;
      setMode(players.length===1 ? "single" : "duel");
      showScreen("home");
      startGameFromHome();
    });

    document.getElementById("resetRecordsBtn").addEventListener("click", ()=>{
      if(confirm("Rekorlarƒ± bu cihazda sƒ±fƒ±rlamak istiyor musun?")){
        localStorage.removeItem(KEY_SINGLE);
        localStorage.removeItem(KEY_DUEL);
        localStorage.removeItem(KEY_HISTORY);
        renderRecords();
        alert("Rekorlar sƒ±fƒ±rlandƒ±.");
      }
    });

    function stopGameIfRunning(){
      if(gameActive){
        gameActive = false;
        clearInterval(timerId);
      }
    }

    // ƒ∞lk durum
    setMode("single");
    showScreen("home");
  </script>
</body>

</html>
